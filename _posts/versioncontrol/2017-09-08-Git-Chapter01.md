---
layout: post
title: "Git基础"
date: 2017-09-08 19:00:00 +0800 
categories: 版本控制
tags:
    - Git
---
* content
{:toc}

关于Git的一些相关知识

<!-- more -->

## Git相关

#### 分布式版本控制系统

Git属于分布式版本控制系统，其客户端并不只是提供最新版本的文件快照，而是将代码仓库（repository）完整的镜像下来。这样的好处是，任何一处协同工作的服务器发生故障，事后都可以用任何一个镜像出来的本地仓库恢复。因为每一次的克隆操作，实际上都是一次对代码仓库的完整备份。  
![distributed](http://ovwkcbdpf.bkt.clouddn.com/image/git/distributed.png '分布式版本控制')  

#### Git基础

##### 直接记录快照，而非差异比较

Git和其他版本控制系统（Subversion等等）的主要差别是对待数据的方法，Git在提交更新时，或者保存项目状态是，会对当时的全部文件做一个快照并保存这个快照的索引（index to that snapshot）（注：这个快照可以理解为当前时刻文件的一个copy，而索引则是这个快照文件在文件系统中存放的位置指针），当然为了高效，如果Git发现文件没有修改，它不会重新存储该文件，而是只保留一个链接指向之前存储的文件（这里的链接我的理解是之前的快照索引的一个拷贝），所以Git对待数据更像是一个快照流。也就是说如果文件改变，Git保存的是改变后文件的所有信息，而不是差量，这是Git与几乎所有其他版本控制系统的重要区别。

##### 几乎所有的操作都是本地执行

这并不是说Git不需要与远程repository交互。不过由于本地Git保存了详细的历史信息，所以对于回退等操作完全可以再本地进行。如果用户需要将自己的提交合并到远程repository中，那网络连接是必不可少的，不过如果暂时没有网络条件也不用着急，可以先将提交保存在本地，等到到有网络条件的情况下再进行合并也可以。

##### 三种状态

Git有三种状态，你的文件必然处于其中之一: 已提交（commited）、已修改（modified）和已暂存（staged）。已提交表示数据已经安全的保存在本地数据库中。已修改表示修改了文件，但还没有保存到数据库中。已暂存表示对于一个已修改的文件的当前版本做了标记，使其包含在下次提交的快照中。  
由此引入Git项目的三个工作区域的概念：Git仓库、工作目录以及暂存区域。
![areas](http://ovwkcbdpf.bkt.clouddn.com/image/git/areas.png '工作目录，暂存区域以及Git仓库')  
Git仓库目录是Git用来保存项目的元数据的对象数据库的地方。是Git的最重要部分，当克隆仓库时，拷贝的就是这里的数据。  
工作目录是对项目的某个版本独立提取出来的内容。这些从Git仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或者修改。  
暂存区域是一个文件，保存了下次将提交的文件列表信息，一般在Git仓库目录中。有时候也被称作“索引”，不过一般的说法还是暂存区域。  
基本的Git工作流程如下:  
1. 在工作目录中修改文件。  
2. 暂存文件，将文件的快照放入暂存区域。  
3. 提交更新，找到暂存区域的文件，将快照永久性存储到Git仓库目录。  
如果Git目录中保存着特定版本文件，就属于已提交状态。 如果做了修改并已放入暂存区域，就属于已暂存状态。 如果自上次取出后，做了修改还没有放到暂存区域，就是已修改状态。  

#### Git起步  

##### Git安装

具体安装步骤可以参考[Git Install](http://blog.chenapp.com/archives/391 'Git安装')，由于我使用的是cygwin并且已经安装了Git，此处讨论下cygwin如何升级Git  
检查当前cygwin上Git的版本为2.8.3，首先从github上拿到当前git repository，执行命令如下：  
>git clone --config core.autocrlf=false https://github.com/git/git.git